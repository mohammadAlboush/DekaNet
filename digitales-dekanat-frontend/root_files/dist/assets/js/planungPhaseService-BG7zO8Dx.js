var p=Object.defineProperty;var g=(i,e,r)=>e in i?p(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r;var c=(i,e,r)=>g(i,typeof e!="symbol"?e+"":e,r);import{a as s,c as u,h as n}from"./index-BXi_OX1m.js";class d{constructor(){c(this,"activePhase",null);c(this,"phases",[]);c(this,"nextId",1)}async getActivePhase(){return this.activePhase}async startPhase(e){const r={id:this.nextId++,semester_id:e.semester_id||1,name:e.name||`${e.semester_typ||"Semester"} ${e.semester_jahr||new Date().getFullYear()}`,startdatum:e.startdatum,enddatum:e.enddatum,ist_aktiv:!0,anzahl_einreichungen:0,anzahl_genehmigt:0,anzahl_abgelehnt:0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()};return this.activePhase=r,this.phases.push(r),console.log("[MockPhaseService] Phase started:",r),r}async closePhase(e,r){const t=this.phases.find(h=>h.id===e);return t&&(t.ist_aktiv=!1,t.geschlossen_am=new Date().toISOString(),this.activePhase=null),{phase:t,archivierte_planungen:0,geloeschte_entwuerfe:0}}async checkSubmissionStatus(e){return this.activePhase?{kann_einreichen:!0,aktive_phase:this.activePhase}:{kann_einreichen:!1,grund:"keine_aktive_phase"}}async getAllPhases(e){return{phasen:this.phases,total:this.phases.length,aktive_phase:this.activePhase??void 0}}async getPhaseStatistics(e){return{phase_id:e,phase_name:"Test Phase",startdatum:new Date().toISOString(),dauer_tage:30,professoren_gesamt:10,professoren_eingereicht:5,einreichungsquote:50,genehmigungsquote:80,durchschnittliche_bearbeitungszeit:24,top_module:[{modul_name:"Datenbanken",anzahl:5},{modul_name:"Programmierung",anzahl:4}]}}async getPhaseHistory(e){return[]}async getArchivedPlanungen(e){return{planungen:[],total:0,pages:0}}async updatePhase(e,r){const t=this.phases.find(h=>h.id===e);if(t)return Object.assign(t,r),t;throw new Error("Phase not found")}async getPhaseSubmissions(e){return[]}async recordSubmission(e){return{professor_id:1,planungphase_id:this.activePhase?.id||1,planung_id:e,eingereicht_am:new Date().toISOString(),status:"eingereicht"}}async sendReminders(e,r){return{gesendet:0,fehler:0}}async getArchivedPlanungDetail(e){throw new Error("Not implemented")}async restoreArchivedPlanung(e){return{success:!1,planung_id:0}}async exportArchiv(e){return new Blob(["Mock Excel Data"])}async generatePhaseReport(e){return new Blob(["Mock PDF Report"])}async getPhaseDashboard(){return{phase:this.activePhase,einreichungen_heute:0,offene_reviews:0,durchschnittliche_bearbeitungszeit:0,deadline_warnung:!1,professoren_ohne_einreichung:[]}}async getNotificationSettings(){return{deadline_reminder_days:3,auto_close_after_deadline:!1,send_submission_confirmation:!0}}async updateNotificationSettings(e){console.log("[MockPhaseService] Notification settings updated:",e)}}const v=new d,o=!1,a=u("PlanungPhaseService");class l{async startPhase(e){try{return(await s.post("/planungphase/start",e)).data}catch(r){throw a.error("Error starting phase",r instanceof Error?r:void 0),new Error(n(r))}}async closePhase(e,r){try{return(await s.post(`/planungphase/${e}/close`,r)).data}catch(t){throw a.error("Error closing phase",t instanceof Error?t:void 0),new Error(n(t))}}async getAllPhases(e){try{const r=e?{semester_id:e}:{};return(await s.get("/planungphase",{params:r})).data}catch(r){throw a.error("Error getting all phases",r instanceof Error?r:void 0),new Error(n(r))}}async getActivePhase(){try{return(await s.get("/planungphase/active")).data.phase||null}catch(e){throw a.error("Error getting active phase",e instanceof Error?e:void 0),new Error(n(e))}}async getActivePhasWithSemester(){try{return(await s.get("/planungphase/active-with-semester")).data}catch(e){throw a.error("Error getting active phase with semester",e instanceof Error?e:void 0),new Error(n(e))}}async updatePhase(e,r){try{return(await s.put(`/planungphase/${e}`,r)).data}catch(t){throw a.error("Error updating phase",t instanceof Error?t:void 0),new Error(n(t))}}async checkSubmissionStatus(e){try{const r=e?{professor_id:e}:{};return(await s.get("/planungphase/submission-status",{params:r})).data}catch(r){throw a.error("Error checking submission status",r instanceof Error?r:void 0),new Error(n(r))}}async getPhaseSubmissions(e){try{const r=await s.get(`/planungphase/${e}/submissions`);return r.data?.data||r.data||[]}catch(r){throw a.error("Error getting phase submissions",r instanceof Error?r:void 0),new Error(n(r))}}async recordSubmission(e){try{return(await s.post("/planungphase/record-submission",{planung_id:e})).data}catch(r){throw a.error("Error recording submission",r instanceof Error?r:void 0),new Error(n(r))}}async getArchivedPlanungen(e){try{return(await s.get("/archiv/planungen",{params:e})).data}catch(r){throw a.error("Error getting archived planungen",r instanceof Error?r:void 0),new Error(n(r))}}async getArchivedPlanungDetail(e){try{return(await s.get(`/archiv/planungen/${e}`)).data}catch(r){throw a.error("Error getting archived planung detail",r instanceof Error?r:void 0),new Error(n(r))}}async exportArchiv(e){try{return(await s.get("/archiv/export",{params:e,responseType:"blob"})).data}catch(r){throw a.error("Error exporting archive",r instanceof Error?r:void 0),new Error(n(r))}}async restoreArchivedPlanung(e){try{return(await s.post(`/archiv/planungen/${e}/restore`)).data}catch(r){throw a.error("Error restoring archived planung",r instanceof Error?r:void 0),new Error(n(r))}}async getPhaseStatistics(e){try{return(await s.get(`/planungphase/${e}/statistics`)).data||{professoren_gesamt:0,professoren_eingereicht:0,einreichungsquote:0,genehmigungsquote:0,durchschnittliche_bearbeitungszeit:0,top_module:[]}}catch(r){throw a.error("Error getting phase statistics",r instanceof Error?r:void 0),new Error(n(r))}}async getPhaseHistory(e){try{const r=e?{professor_id:e}:{};return(await s.get("/planungphase/history",{params:r})).data.history||[]}catch(r){throw a.error("Error getting phase history",r instanceof Error?r:void 0),new Error(n(r))}}async generatePhaseReport(e){try{return(await s.get(`/planungphase/${e}/report`,{responseType:"blob"})).data}catch(r){throw a.error("Error generating phase report",r instanceof Error?r:void 0),new Error(n(r))}}async getPhaseDashboard(){try{return(await s.get("/planungphase/dashboard")).data}catch(e){throw a.error("Error getting phase dashboard",e instanceof Error?e:void 0),new Error(n(e))}}async sendReminders(e,r){try{return(await s.post(`/planungphase/${e}/reminders`,{professor_ids:r})).data}catch(t){throw a.error("Error sending reminders",t instanceof Error?t:void 0),new Error(n(t))}}async getNotificationSettings(){try{return(await s.get("/planungphase/notification-settings")).data}catch(e){throw a.error("Error getting notification settings",e instanceof Error?e:void 0),new Error(n(e))}}async updateNotificationSettings(e){try{await s.put("/planungphase/notification-settings",e)}catch(r){throw a.error("Error updating notification settings",r instanceof Error?r:void 0),new Error(n(r))}}}const _=new l;export{_ as p};
