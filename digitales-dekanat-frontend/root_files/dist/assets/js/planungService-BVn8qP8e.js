import{c as g,a,h as u}from"./index-BXi_OX1m.js";const n=g("PlanungService");class s{async getAllPlanungen(r){try{n.debug(" Fetching planungen with params:",r);const e=new URLSearchParams;r?.semester_id&&e.append("semester_id",r.semester_id.toString()),r?.status&&e.append("status",r.status),r?.nur_aktive_phase&&e.append("nur_aktive_phase","true");const t=`/planung${e.toString()?`?${e}`:""}`;n.debug(" Request URL:",t);const o=await a.get(t);return n.debug(" Response:",{success:o.data.success,dataLength:o.data.data?.length||0}),o.data}catch(e){throw n.error(" Error fetching planungen:",e),new Error(u(e))}}async getMeinePlanungen(){try{n.debug(" Fetching meine planungen...");const r=await a.get("/planung");return n.debug(" Meine Planungen:",r.data.data?.length||0),r.data}catch(r){throw n.error(" Error fetching meine planungen:",r),new Error(u(r))}}async getMeineAktuellePlanung(){try{n.debug(" Fetching aktuelle planung...");const r=await a.get("/planung/meine");return n.debug(" Aktuelle Planung:",r.data.data?.id||"keine"),r.data}catch(r){throw n.error(" Error fetching aktuelle planung:",r),new Error(u(r))}}async getPlanung(r){try{n.debug(" Fetching planung:",r);const e=await a.get(`/planung/${r}`);return n.debug(" Planung loaded:",e.data.data?.status),e.data}catch(e){throw n.error(" Error fetching planung:",e),new Error(u(e))}}async createPlanung(r){try{n.debug(" Creating planung:",r);const e=await a.post("/planung",r);return n.debug(" Planung created:",e.data.data?.id),e.data}catch(e){throw n.error(" Error creating planung:",e),new Error(u(e))}}async updatePlanung(r,e){try{n.debug(" Updating planung:",r);const t=await a.put(`/planung/${r}`,e);return n.debug(" Planung updated"),t.data}catch(t){throw n.error(" Error updating planung:",t),new Error(u(t))}}async deletePlanung(r,e=!1){try{n.debug(" Deleting planung:",r,"force:",e);const t=`/planung/${r}${e?"?force=true":""}`,o=await a.delete(t);return n.debug(" Planung deleted"),o.data}catch(t){throw n.error(" Error deleting planung:",t),new Error(u(t))}}async addModule(r,e){try{n.debug(" Adding module to planung:",r);const t=await a.post(`/planung/${r}/modul`,e);return n.debug(" Module added:",t.data.data?.id),t.data}catch(t){throw n.error(" Error adding module:",t),new Error(u(t))}}async updateModule(r,e,t){try{n.debug(" Updating module:",e);const o=await a.put(`/planung/${r}/modul/${e}`,t);return n.debug(" Module updated"),o.data}catch(o){throw n.error(" Error updating module:",o),new Error(u(o))}}async removeModule(r,e){try{n.debug(" Removing module:",e);const t=await a.delete(`/planung/${r}/modul/${e}`);return n.debug(" Module removed"),t.data}catch(t){throw n.error(" Error removing module:",t),new Error(u(t))}}async addWunschTag(r,e){try{n.debug(" Adding wunsch tag to planung:",r);const t=await a.post(`/planung/${r}/wunsch-tag`,e);return n.debug(" Wunsch tag added"),t.data}catch(t){throw n.error(" Error adding wunsch tag:",t),new Error(u(t))}}async removeWunschTag(r,e){try{n.debug(" Removing wunsch tag:",e);const t=await a.delete(`/planung/${r}/wunsch-tag/${e}`);return n.debug(" Wunsch tag removed"),t.data}catch(t){throw n.error(" Error removing wunsch tag:",t),new Error(u(t))}}async updateZusatzinfos(r,e){try{n.debug(" Updating zusatzinfos for planung:",r),n.debug(" Data:",e);const t=await a.put(`/planung/${r}/zusatzinfos`,e);return n.debug(" Zusatzinfos updated successfully"),t.data}catch(t){throw n.error(" Error updating zusatzinfos:",t),new Error(u(t))}}async submitPlanung(r){try{n.debug(" üì§ Submitting planung:",r);const e=await a.post(`/planung/${r}/einreichen`);return n.debug(" ‚úÖ Planung submitted successfully"),n.debug(" New status:",e.data.data?.status),e.data}catch(e){throw n.error(" ‚ùå Error submitting planung:",e),new Error(u(e))}}async approvePlanung(r){try{n.debug(" ‚úÖ Approving planung:",r);const e=await a.post(`/planung/${r}/freigeben`);return n.debug(" ‚úÖ Planung approved successfully"),n.debug(" New status:",e.data.data?.status),e.data}catch(e){throw n.error(" ‚ùå Error approving planung:",e),new Error(u(e))}}async rejectPlanung(r,e){try{n.debug(" ‚ùå Rejecting planung:",r,"Grund:",e);const t=await a.post(`/planung/${r}/ablehnen`,{grund:e});return n.debug(" ‚ùå Planung rejected"),n.debug(" New status:",t.data.data?.status),t.data}catch(t){throw n.error(" ‚ùå Error rejecting planung:",t),new Error(u(t))}}async getAllPlanungenDekan(r){try{n.debug(" [DEKAN] Fetching all planungen:",r);const e=new URLSearchParams;r?.semester_id&&e.append("semester_id",r.semester_id.toString()),r?.status&&e.append("status",r.status),r?.nur_aktive_phase&&e.append("nur_aktive_phase","true");const t=`/planung/dekan${e.toString()?`?${e}`:""}`,o=await a.get(t);return n.debug(" [DEKAN] Planungen loaded:",o.data.data?.length||0),o.data}catch(e){throw n.error(" [DEKAN] Error fetching planungen:",e),new Error(u(e))}}async getEingereichtePlanungen(r){try{n.debug(" [DEKAN] Fetching eingereichte planungen");const e=r?`/planung/eingereicht?semester_id=${r}`:"/planung/eingereicht",t=await a.get(e);return n.debug(" [DEKAN] Eingereichte Planungen:",t.data.data?.length||0),t.data}catch(e){throw n.error(" [DEKAN] Error fetching eingereichte planungen:",e),new Error(u(e))}}async calculateSWS(r){try{n.debug(" Calculating SWS for planung:",r);const e=await a.post(`/planung/${r}/berechne-sws`);return n.debug(" SWS calculated:",e.data.data?.gesamt_sws),e.data}catch(e){throw n.error(" Error calculating SWS:",e),new Error(u(e))}}}const l=new s;export{l as p};
