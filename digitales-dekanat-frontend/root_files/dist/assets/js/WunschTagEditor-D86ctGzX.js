import{j as e,B as u,H as v,f as i,b5 as M,$ as r,a0 as f,a1 as p,a4 as Q,P,K as x,ab as z,bW as $,aT as K,aY as q,L as X,g as Y,k as O,aZ as F,I as L,ak as ee,b3 as te,aD as ne,aE as ae,aF as ie,aw as W,ax as I,az as C,o as S,O as se,aH as le,be as re,bX as oe}from"./vendor-mui-BiVZR0IW.js";import{r as D}from"./vendor-react-CBtCGaWm.js";const ue={vorlesung:30,uebung:20,praktikum:15,seminar:20},he={maxInput:10},ge={maxModuleSuggestions:20},y=[{value:"montag",label:"Montag",short:"Mo"},{value:"dienstag",label:"Dienstag",short:"Di"},{value:"mittwoch",label:"Mittwoch",short:"Mi"},{value:"donnerstag",label:"Donnerstag",short:"Do"},{value:"freitag",label:"Freitag",short:"Fr"}],B=[{value:"ganztags",label:"Ganztags",icon:e.jsx(K,{})},{value:"vormittag",label:"Vormittag",icon:e.jsx(re,{})},{value:"nachmittag",label:"Nachmittag",icon:e.jsx(oe,{})}],G=[{value:"hoch",label:"Hoch",color:"error"},{value:"mittel",label:"Mittel",color:"warning"},{value:"niedrig",label:"Niedrig",color:"info"}],xe=({wunschFreieTage:s,onChange:h,readOnly:o=!1,compact:E=!1,hideHints:k=!1})=>{const[N,T]=D.useState(!1),[g,m]=D.useState(null),[l,d]=D.useState({id:"",wochentag:"montag",zeitraum:"ganztags",prioritaet:"mittel",grund:""}),R=t=>{if(!o&&!s.find(n=>n.wochentag===t&&n.zeitraum==="ganztags")){const n={id:Date.now().toString(),wochentag:t,zeitraum:"ganztags",prioritaet:"mittel",grund:""};h([...s,n])}},w=t=>{if(o)return;const n=s.filter(a=>!(a.wochentag===t&&a.zeitraum==="ganztags"));h(n)},H=t=>{const n=s.filter(c=>c.wochentag===t);if(n.length===0)return null;const a=n.some(c=>c.zeitraum==="ganztags"),_=n.some(c=>c.zeitraum==="vormittag"),J=n.some(c=>c.zeitraum==="nachmittag");return{hasGanztags:a,hasVormittag:_,hasNachmittag:J,count:n.length}},A=t=>{o||(t?(m(t),d(t)):(m(null),d({id:"",wochentag:"montag",zeitraum:"ganztags",prioritaet:"mittel",grund:""})),T(!0))},j=()=>{T(!1),m(null)},V=()=>{let t;if(g)t=s.map(n=>n.id===g.id?l:n);else{if(s.some(a=>a.wochentag===l.wochentag&&a.zeitraum===l.zeitraum)){alert("Diese Kombination existiert bereits!");return}t=[...s,{...l,id:Date.now().toString()}]}h(t),j()},Z=t=>{if(o)return;const n=s.filter(a=>a.id!==t);h(n)},b=()=>{const t=s.filter(a=>a.zeitraum==="ganztags").length,n=s.filter(a=>a.zeitraum!=="ganztags").length;return t+n*.5},U=t=>G.find(a=>a.value===t)?.color||"default";return e.jsxs(u,{children:[!k&&!E&&e.jsxs(v,{severity:"info",sx:{mb:3},children:[e.jsxs(i,{variant:"subtitle2",gutterBottom:!0,children:[e.jsx(M,{sx:{mr:1,verticalAlign:"middle"}}),"Hinweise zur Auswahl"]}),e.jsxs(i,{variant:"body2",children:["• Wunsch-freie Tage können nicht garantiert werden",e.jsx("br",{}),"• Je nach Priorität werden Ihre Wünsche bei der Planung berücksichtigt",e.jsx("br",{}),"• Maximal 2 komplette Tage oder 4 Halbtage empfohlen"]})]}),!E&&e.jsxs(r,{container:!0,spacing:2,sx:{mb:3},children:[e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(f,{variant:"outlined",children:e.jsxs(p,{children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",children:"Freie Tage (Äquivalent)"}),e.jsx(i,{variant:"h4",children:b()}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Tage gesamt"})]})})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(f,{variant:"outlined",children:e.jsxs(p,{children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",children:"Hohe Priorität"}),e.jsx(i,{variant:"h4",color:"error",children:s.filter(t=>t.prioritaet==="hoch").length}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Einträge"})]})})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(f,{variant:"outlined",children:e.jsxs(p,{children:[e.jsx(i,{variant:"subtitle2",color:"text.secondary",children:"Status"}),b()<=2?e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[e.jsx(Q,{color:"success"}),e.jsx(i,{color:"success.main",children:"Optimal"})]}):e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[e.jsx(M,{color:"warning"}),e.jsx(i,{color:"warning.main",children:"Viele Wünsche"})]})]})})})]}),!o&&e.jsxs(P,{sx:{p:3,mb:3},variant:"outlined",children:[e.jsx(i,{variant:"subtitle1",fontWeight:500,gutterBottom:!0,children:"Schnellauswahl - Ganztägig frei"}),e.jsx(i,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Klicken Sie auf die Tage, an denen Sie ganztägig frei haben möchten"}),e.jsx(r,{container:!0,spacing:1,children:y.map(t=>{const n=H(t.value),a=n?.hasGanztags||!1;return e.jsx(r,{item:!0,children:e.jsxs(x,{variant:a?"contained":"outlined",onClick:()=>a?w(t.value):R(t.value),startIcon:a?e.jsx($,{}):e.jsx(K,{}),sx:{minWidth:120,position:"relative"},children:[t.label,n&&!n.hasGanztags&&e.jsx(z,{label:`${n.count}`,size:"small",sx:{position:"absolute",top:-8,right:-8,height:20,minWidth:20}})]})},t.value)})})]}),e.jsxs(P,{sx:{p:3},variant:"outlined",children:[e.jsxs(u,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(i,{variant:"subtitle1",fontWeight:500,children:o?"Wunsch-freie Tage":"Detaillierte Wunschliste"}),!o&&e.jsx(x,{size:"small",startIcon:e.jsx(q,{}),onClick:()=>A(),children:"Wunsch hinzufügen"})]}),s.length>0?e.jsx(X,{children:s.map((t,n)=>e.jsxs(Y,{divider:n<s.length-1,children:[e.jsx(O,{primary:e.jsxs(u,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(i,{variant:"subtitle2",children:y.find(a=>a.value===t.wochentag)?.label}),e.jsx(z,{label:B.find(a=>a.value===t.zeitraum)?.label,size:"small",variant:"outlined"}),e.jsx(z,{label:t.prioritaet,size:"small",color:U(t.prioritaet)})]}),secondary:t.grund||"Kein Grund angegeben"}),!o&&e.jsxs(F,{children:[e.jsx(L,{edge:"end",size:"small",onClick:()=>A(t),sx:{mr:1},children:e.jsx(ee,{})}),e.jsx(L,{edge:"end",size:"small",onClick:()=>Z(t.id),children:e.jsx(te,{})})]})]},t.id))}):e.jsx(v,{severity:"info",children:o?"Keine Wunsch-freien Tage definiert.":"Keine Wunsch-freien Tage angegeben. Sie sind flexibel in der Stundenplanung."})]}),!k&&b()>2&&e.jsxs(v,{severity:"warning",sx:{mt:3},children:[e.jsx(i,{variant:"subtitle2",gutterBottom:!0,children:"Viele Wunsch-freie Tage"}),e.jsx(i,{variant:"body2",children:"Sie haben mehr als 2 Tage als Wunsch angegeben. Je mehr freie Tage Sie wünschen, desto schwieriger wird die Stundenplanung. Überlegen Sie, ob alle Wünsche wirklich notwendig sind."})]}),e.jsxs(ne,{open:N,onClose:j,maxWidth:"sm",fullWidth:!0,children:[e.jsx(ae,{children:g?"Wunsch bearbeiten":"Neuen Wunsch hinzufügen"}),e.jsx(ie,{children:e.jsxs(r,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(W,{fullWidth:!0,children:[e.jsx(I,{children:"Wochentag"}),e.jsx(C,{value:l.wochentag,onChange:t=>d({...l,wochentag:t.target.value}),label:"Wochentag",children:y.map(t=>e.jsx(S,{value:t.value,children:t.label},t.value))})]})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(W,{fullWidth:!0,children:[e.jsx(I,{children:"Zeitraum"}),e.jsx(C,{value:l.zeitraum,onChange:t=>d({...l,zeitraum:t.target.value}),label:"Zeitraum",children:B.map(t=>e.jsx(S,{value:t.value,children:t.label},t.value))})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsxs(W,{fullWidth:!0,children:[e.jsx(I,{children:"Priorität"}),e.jsx(C,{value:l.prioritaet,onChange:t=>d({...l,prioritaet:t.target.value}),label:"Priorität",children:G.map(t=>e.jsx(S,{value:t.value,children:t.label},t.value))})]})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(se,{fullWidth:!0,multiline:!0,rows:2,label:"Begründung (optional)",value:l.grund,onChange:t=>d({...l,grund:t.target.value}),placeholder:"z.B. Kinderbetreuung, andere Verpflichtungen, etc."})})]})}),e.jsxs(le,{children:[e.jsx(x,{onClick:j,children:"Abbrechen"}),e.jsx(x,{variant:"contained",onClick:V,children:g?"Speichern":"Hinzufügen"})]})]})]})};export{ue as D,he as M,ge as P,xe as W};
